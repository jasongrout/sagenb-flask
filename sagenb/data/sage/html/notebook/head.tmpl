{#
INPUT:
- worksheet - an instance of Worksheet
- worksheet_filename - a string containing a worksheet's filename
- username - a string containing a user's name
- JSMATH - a boolean stating whether to include jsMath
- JEDITABLE_TINYMCE - a boolean stating whether to include jEditable and TinyMCE
  #}
{% macro common_title(worksheet_filename, worksheet) %}
    {% if worksheet_filename %}
        {{ worksheet.name() }} (Sage)
    {% else %}
        Sage Notebook | Welcome
    {% endif %}
{% endmacro %}

{% macro common_css %}
<!-- Sage notebook stylesheet -->
<link rel=stylesheet href="/css/main.css" type="text/css" />
{% endmacro %}

{% macro common_javascript(worksheet, worksheet_filename, username, JSMATH, JEDITABLE_TINYMCE) %}

<!-- jQuery - general-purpose functions -->
<script type="text/javascript" src="/javascript/jquery/jquery-1.3.2.min.js"></script>

<!-- jQuery UI - interacts, widgets, drag-drop, etc. -->
<link rel="stylesheet" href="/javascript/jqueryui/css/sage/jquery-ui-1.7.2.custom.css" />
<script type="text/javascript" src="/javascript/jqueryui/js/jquery-ui-1.7.2.custom.min.js"></script>

<!-- jQuery plugins - color picker, shift-click, AJAX forms, IE fixes -->
<link rel="stylesheet" href="/javascript/jquery/plugins/farbtastic/farbtastic.css" type="text/css" />
<script type="text/javascript" src="/javascript/jquery/plugins/farbtastic/farbtastic.min.js"></script>
<script type="text/javascript" src="/javascript/jquery/plugins/extendedclick/jquery.event.extendedclick.min.js"></script>
<script type="text/javascript" src="/javascript/jquery/plugins/form/jquery.form.min.js"></script>
<script type="text/javascript" src="/javascript/jquery/plugins/jquery.bgiframe.min.js"></script>

<!-- Sage Notebook library -->
<script type="text/javascript" src="/javascript/sage/main.js"></script>
  
{% if JSMATH %}
<!-- jsMath - typeset mathematics -->
<script type="text/javascript" src="/javascript/sage/jsmath.js"></script>
{% endif %}

<!-- Sage3d - accelerated 3D graphics -->
<script type="text/javascript" src="/javascript/sage3d/sage3d.js"></script>

<!-- Jmol - embedded 3D graphics -->
<script type="text/javascript" src="/java/jmol/appletweb/Jmol.js"></script>
<!-- This must stay in head -->
<script>jmolInitialize("/java/jmol");jmolSetCallback("menuFile","/java/jmol/appletweb/SageMenu.mnu");</script>

{% if JEDITABLE_TINYMCE and not worksheet.docbrowser() and not worksheet.is_published() %}
<!-- TinyMCE and jEditable - in-place editing of text cells -->
<script type="text/javascript" src="/javascript/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript" src="/javascript/jquery/plugins/jeditable/jquery.jeditable.mini.js" charset="utf-8"></script>
<script type="text/javascript" src="/javascript/sage/tinymce.js"></script>
{% endif %}

<script type="text/javascript">user_name= "{{ username }}";</script>
{% if worksheet_filename %}
<script  type="text/javascript">
  worksheet_filename="{{ worksheet_filename }}";
  worksheet_name="{{ worksheet.name() }}";
  server_ping_while_alive();
</script>
{% endif %}

{% endmacro %}
